<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Student Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>

<body class="d-flex flex-column min-vh-100">

<!-- Header -->
<div th:replace="fragments/header :: header"></div>

<!-- Main -->
<main class="flex-fill">
    <div class="container mt-4">
        <h2>Student Dashboard</h2>

        <h4>Assigned Tasks</h4>

        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center"
                th:each="task : ${tasks}">

                <span th:text="${task.title}"></span>

                <!-- If already submitted, show View -->
                <span th:if="${submittedMap[task.id]}">
                    <a th:href="@{/student/view-task/{id}(id=${task.id})}" class="btn btn-sm btn-success">
                        View
                    </a>
                </span>

                <!-- If not submitted, show Submit -->
                <span th:if="${!submittedMap[task.id]}">
                    <a th:href="@{/student/submit-task/{id}(id=${task.id})}" class="btn btn-sm btn-primary">
                        Submit
                    </a>
                </span>
            </li>
        </ul>
    </div>
</main>

<!-- Footer -->
<div th:replace="fragments/footer :: footer"></div>

</body>
</html>
